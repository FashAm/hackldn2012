from app.handlers import base
from mongoengine.queryset import DoesNotExist

class FrontPageHandler(base.BaseHandler):
    '''
    Check user status and either load the home screen or the
    welcome page.
    '''
    def on_get(self):
        #if not self.current_user:
        #    self.base_render("welcome.html")
        #else:
        #    self.redirect("/home")
	#self.base_render("welcome.html")
	self.base_render("intro.html")

class KeywordHandler(base.BaseHandler):
    def on_post(self):
	keywords = self.get_argument("txtSearch",None)
	if not keywords:
		return ("No Keywords entered",)
	keyword_array = keywords.split(" ")#User.objects(id = uid).get()
	if keywords=="suzu":
		keywords = "takkos"
	return (keywords,) 


    def on_success(self, feed):	
	if feed == "theo":
		self.base_render("theo.html")
	else:
		feed= {"dates": [["2011-01-26 00:00:00", "2011-01-26 00:05:00", "2011-01-26 00:10:00", "2011-01-26 00:15:00", "2011-01-26 00:20:00", "2011-01-26 00:25:00", "2011-01-26 00:30:00", "2011-01-26 00:35:00", "2011-01-26 00:40:00", "2011-01-26 00:45:00", "2011-01-26 00:50:00", "2011-01-26 00:55:00", "2011-01-26 01:00:00", "2011-01-26 01:05:00", "2011-01-26 01:10:00", "2011-01-26 01:15:00", "2011-01-26 01:20:00", "2011-01-26 01:25:00", "2011-01-26 01:30:00", "2011-01-26 01:35:00", "2011-01-26 01:40:00", "2011-01-26 01:45:00", "2011-01-26 01:50:00", "2011-01-26 01:55:00", "2011-01-26 02:00:00", "2011-01-26 02:05:00", "2011-01-26 02:10:00", "2011-01-26 02:15:00", "2011-01-26 02:20:00", "2011-01-26 02:25:00", "2011-01-26 02:30:00", "2011-01-26 02:35:00", "2011-01-26 02:40:00", "2011-01-26 02:45:00", "2011-01-26 02:50:00", "2011-01-26 02:55:00", "2011-01-26 03:00:00", "2011-01-26 03:10:00", "2011-01-26 03:15:00", "2011-01-26 03:20:00", "2011-01-26 03:25:00", "2011-01-26 03:30:00", "2011-01-26 03:35:00", "2011-01-26 03:40:00", "2011-01-26 03:45:00", "2011-01-26 03:50:00", "2011-01-26 03:55:00", "2011-01-26 04:00:00", "2011-01-26 04:05:00", "2011-01-26 04:10:00", "2011-01-26 04:15:00", "2011-01-26 04:20:00", "2011-01-26 04:25:00"]], "meta": [{"date": "2011-01-26 00:05:00", "title": "event0"}, {"date": "2011-01-26 00:10:00", "title": "event1"}, {"date": "2011-01-26 00:30:00", "title": "event2"}, {"date": "2011-01-26 00:35:00", "title": "event3"}, {"date": "2011-01-26 01:15:00", "title": "event4"}, {"date": "2011-01-26 01:30:00", "title": "event5"}, {"date": "2011-01-26 01:45:00", "title": "event6"}, {"date": "2011-01-26 01:55:00", "title": "event7"}, {"date": "2011-01-26 02:05:00", "title": "event8"}, {"date": "2011-01-26 03:15:00", "title": "event9"}, {"date": "2011-01-26 03:40:00", "title": "event10"}, {"date": "2011-01-26 03:40:00", "title": "event11"}, {"date": "2011-01-26 03:50:00", "title": "event12"}, {"date": "2011-01-26 03:55:00", "title": "event13"}, {"date": "2011-01-26 04:20:00", "title": "event14"}, {"date": "2011-01-26 04:25:00", "title": "event15"}, {"date": "2011-01-26 04:25:00", "title": "event16"}, {"date": "2011-01-26 04:25:00", "title": "event17"}, {"date": "2011-01-26 04:25:00", "title": "event18"}, {"date": "2011-01-26 04:25:00", "title": "event19"}], "counts": [[132.0, 116.0, 118.0, 110.0, 106.0, 112.0, 98.0, 95.0, 96.0, 99.0, 86.0, 92.0, 92.0, 70.0, 79.0, 101.0, 47.0, 52.0, 75.0, 64.0, 48.0, 69.0, 59.0, 53.0, 40.0, 55.0, 28.0, 25.0, 31.0, 30.0, 30.0, 27.0, 36.0, 42.0, 42.0, 49.0, 35.0, 29.0, 44.0, 33.0, 33.0, 36.0, 28.0, 25.0, 19.0, 40.0, 25.0, 22.0, 33.0, 31.0, 20.0, 21.0, 22.0]]}

		self.base_render("timeline.html", feed = feed)
	

